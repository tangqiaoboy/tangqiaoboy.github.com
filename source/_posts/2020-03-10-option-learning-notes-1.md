---
title: 美股期权学习笔记（二）
date: 2020-03-15 22:41:43
categories: summary
tags: books
---

最近研读了《麦克米伦谈期权》，以下是一些总结。

## 什么是期权

期权是以特定价格买入或者卖出特定证券的权利，该权利在特定时间内有效。

期权有几个关键的概念：

 - 过期时间（expiration date），到了时间就过期。有期权的一方可以在到期前选择执行期权或放弃执行。
 - 行权价（strike price），买卖双方按行权价执行。
 - 权利金（premium），也就是期权的现金价值。期权的现金价值会随着时间以及股价波动。
 - 类型。分为买入权利（CALL）和卖出权利（PUT）。CAll 又被称为看涨期权，PUT 被称为看跌期权。
 - 标的。指目标期权。

期权在美股上按手交易，每手代表 100 份标的。据说历史上有人把 1 手当成 1 股，结果就是多买了 100 倍的期权。

## 行权时间

美式期权和欧式期权不一样，美式期权可以在到期前的任意时间随时行权，欧式期权只能在到期时行权。美股上交易的股票期权都是美式期权。大部分的指数期权是欧式期权。

所以，对于美式期权，如果你通过卖 CALL 或者卖 PUT 做空一个期权，即使最终到了过期时间你的期权收益为正，但是有可能在中段波动的时候，你的期权在某一个时间点是亏损的，只要你的对手方提前行权了，你的这个亏损就被确定了。

我使用的期权软件背后的券商是[盈透证券（IB）](https://www.interactivebrokers.com.hk/cn/home.phplink), 使用它提供的 [TWS 软件](https://www1.interactivebrokers.com/en/index.php?f=16040)，即可将自己的期权提前行权。

具体操作方式是在 TWS 中选择 “账户”->“期权行权”，然后操作相关的期权选择“提前行权”即可，如下图所示：

{% img /images/tws-1.jpg %}

{% img /images/tws-2.jpg %}

## 期权拥有方到期的默认操作

期权拥有方按理说在到期时有行权和不行权的权利，那么如果不进行任何操作，默认的操作是行权还是不行权呢？美股的规则如下：

 * 到期日，期权在价内 0.01 或以上的股票期权将被自动行权，但是当投资者的保证金不满足行权条件时则会按照市场价平仓。

 * 到期日，价格已低于 0.01 且投资者不主动行权或者平仓。这时候期权会自动失效，您的损失为全部期权费；一般情况下，这时候如果主动行权损失会更多。

## 实值期权与虚值期权

如果行权价低于股票的价格，则我们称这个期权是有实值的，是实值期权，反之则称为虚值期权。

虚值期权之所以有交易，是因为它们具有时间价值，随着时间的变化，股价也会变动，有可能当时还是虚值的期权，未来就是实值了。

如果到了期权的到期时间，期权还是一个虚值期权，则它的价值就会归为 0。比如一个以 30 元买入的看涨期权，如果到期时股票价格是 20 元，那么期权所有者肯定不会行权，因为行权的价格比从市场上直接买还贵，这个期权就相当于废纸。

## 盈亏曲线

我们假设某家公司的股价是 50 元，然后可以画出不同期权的盈亏曲线。不得不说，画这些图还挺有意思的，笔者用 keynote 完成的所有图的绘制。

### 买入看涨期权

买入行权价 52 元的看涨期权的价格是 2 元，则盈亏曲线如下：

{% img /images/buy-call.jpg %}

从图中可以看出，期权到期时：
 - 当股价低于 52 元时，损失为 200 元（1手期权的价格）
 - 当股价等于 54 元时，刚好盈亏平衡
 - 当股价高于 54 元时，有盈利
 - 买入看涨期权，最大损失为 200 元，最大盈利无上限

### 卖出看涨期权

卖出看涨期权的盈亏曲线和买入的刚好上下对称，因为两者互为对手盘。你盈多少，对手就亏多少，所以盈亏曲线如下：

{% img /images/sell-call.jpg %}

从图中可以看出，期权到期时：
 - 当股价低于 52 元时，盈利为 200 元（1手期权的价格）
 - 当股价等于 54 元时，刚好盈亏平衡
 - 当股价高于 54 元时，有亏损
 - 卖出看涨期权，最大收益为 200 元，最大亏损无上限

### 买入看空期权

如果我们买入一个 48 元的期权，期权价格是 2 元，则盈亏曲线如下：

{% img /images/buy-put.jpg %}

从图中可以看出，期权到期时：
 - 当股价高于 48 元，则亏损为 200 元（1手期权的价格）
 - 当股价等于 46 元，刚好盈亏平衡
 - 当股价低于 46 元，则有盈利。理论上，最高盈利是 4600 元，对应股价是 0 元。

### 卖出看空期权

同样，卖出看跌期权的盈亏曲线和买入的刚好上下对称，因为两者互为对手盘。盈亏曲线如下：

{% img /images/sell-put.jpg %}

从图中可以看出，期权到期时：
 - 当股价高于 48 元，则盈利为 200 元（1手期权的价格）
 - 当股价等于 46 元，刚好盈亏平衡
 - 当股价低于 46 元，则有亏损。理论上，最高亏损是 4600 元，对应股价是 0 元。

## 保证金

当你买 CALL 或者买 PUT ，你付出的就是权利金，损失是有限的，最坏情况下就是期权价值变为 0，损失掉所有的权利金。但是你的理论收益是无穷的。

当你卖 CALL 或者卖 PUT，你就会收到权利金，但是你的收益上限就是权利金。当你的对手方行权的时候，你需要执行相应的义务：

 - 对于 CALL 期权，你需要按指定价格卖出标的股票
 - 对于 PUT 期权，你需要按指定价格买入标的股票

为了保证你有行使这个义务的能力，你需要在帐户中保留足够的保证金。保证金的计算规则比较复杂，与你的期权仓位占比以及期权集中性都有关系，在盈透证券的[帮助页面](https://www.interactivebrokers.com.hk/cn/index.php?f=27149)上有详细的介绍。

如果你的证券价值和现金加起来的保证金不足，则系统会随机平仓你的一部分股票以维持保证金要求。

## 期权的组合（一）

期权组合起来，可以构建一些特殊的盈利曲线。比如我们同时卖出看涨和看跌期权，就可以将以下两种曲线叠加。《麦克米伦谈期权》在 2.5.5 小结中介绍了这种被称为跨式期权的组合。

下图中的红色和蓝色分别为卖出看跌和卖出看涨的盈亏曲线，而黄色则表示叠加之后的组合盈亏曲线。

{% img /images/sell-buy-put.jpg %}

这个曲线很有意思，它表示不管股票是上涨还是下跌，只要股价到期时的波动范围在 44 ~ 52 元之间，这个组合就是盈利的。

想当然的，你可以构建一个波动范围极宽的跨式组合期权，虽然这种组合期权盈利不多，但是盈利的概率极大。历史上曾经这种策略很流行，但是市场总是会出现小概率事件，这种跨式期权收益有上限，但是亏损无限的特点，遇上一次极端事件就能让投资者破产。

## 期权的组合（二）

相比刚刚介绍的那种组合，以下的期权组合更被做市商所采用，即：买入看涨期权 + 卖出看跌期权。

你看完下图就能明白这个组合的有趣之处了：

{% img /images/buy-call-sell-put.jpg %}

这种组合的收益曲线和直接买入股票是完全一样的。但是在这种组合下，你所需要的资金只是买入股票的一部分，所以你可以以更小的资金成本，达到同样的收益曲线。

实际当中，这种策略与买入股票并不是完全一样收益，因为股票还会涉及分红，而持有期权是没有分红权的。另外则是交易费率和交易次数的差异。

## 组合套利

因为买卖价差的原因，有些时候做市商会通过组合，构建一个收益为正，但是风险为零的套利。

刚刚说到`期权的组合（二）`就是一种持有股票的策略，如果我们用`期权组合（二）`再加上`卖空股票`，就构建出一种组合。由于买卖价差的原因，这种组合虽然相当于什么都没干，但是却会有收益。

以下我就以一个实际的案例进行说明。我们拿好未来在美股的真实股价与期权价举例。

好未来在 3 月 6 日的收盘价格是 56.49，同时
 - 4.17 到期的 50 元看涨期权挂单价格是 7.8(买) ~ 9.8（卖），最近成交价是 7.62
 - 4.17 到期的 50 元看跌期权挂单价格是 1.45（买）~ 1.95（卖），最近成交价是 1.69

我们假设，我们在 3.6 收盘前，以：
 - 以 56.49 的价格卖空 100 股股票
 - 以 7.62 的成交价买入 1 手看涨期权
 - 以 1.69 的成交价卖出 1 手看跌期权

那我们的收益应该是多少呢？为了计算收益，我们需要搬出初中学习的二元一次方程。如果你不想跟着我计算，可以直接看最后的结论。

### 计算卖空的收益函数

假设未来股价为 x，则卖空 100 股股票的收益函数 y1 为：
```
y1 = (56.49 - x) * 100
   = (50 - x) * 100 + 6.49 * 100
   = (50 - x) * 100 + 649
```
应该很简单对吧？因为是做空，x 越大，则 y1 越小。

### 计算买入看涨期权的收益函数

假设未来股价为 x，则期权到期时收益函数 y2 为：
```
x < 50 时：
	y2 = -7.62 * 100 = -762
x >= 50 时：
	y2 = (x - 50) * 100 - 762
```

能看懂吧？因为期权行权价是 50，所以股价少于 50 则期权就作废了，损失为 762 元的权利金。如果股价高于 50，则可以按上面的公式来计算盈亏。

### 计算卖出看跌期权的收益函数

假设未来股价为 x，则期权到期时收益函数 y3 为：
```
x < 50 时：
	y3 = (x - 50) * 100 + 169
x >= 50 时：
	y3 = 1.69 * 100 = 169
```
因为我们是卖出看跌，所以如果股价高于 50，我们的收益就是 169 的权利金，否则我们就需要按上面的公式计算收益。

### 求和

我们将 y1, y2, y3 进行求和
```
x < 50时：
	y1 = (50 - x) * 100 + 649
	y2 = -762
	y3 = (x - 50) * 100 + 169
  求和：
	y = y1 + y2 + y3
	  = (50 - x) * 100 + 649 -762
	   + (x - 50) * 100 + 169
	  = 649 - 762 + 169
	  = 56

y >= 50时：
	y1 = (50 - x) * 100 + 649
	y2 = (x - 50) * 100 - 762
	y3 = 169
  求和：
	y = y1 + y2 + y3
	  = (50 - x) * 100 + 649
	   + (x - 50) * 100 - 762
	   + 169
	  = 649 - 762 + 169
	  = 56
```

最后，我们发现，x 不管是大于 50 还是小于 50，情况都一样，`y = 56`。

你看，如果你当时按市场价同时完成了这 3 笔交易，你就构建了一个套利。这也是做市商的生意模式。

这种组合在《麦克米伦谈期权》的 6.2 章节中被称作 **Delta 中性头寸**。

## 小结

 * 期权是以特定价格买入或者卖出特定证券的权利，该权利在特定时间内有效。
 * 美式期权是可以提前行权的。
 * 卖出期权收到权利金，但是需要帐户中留有足够执行期权义务的保证金。
 * 期权的组合可以用来构建各种特殊的盈利曲线。
 * 如果一个组合与标的股价无关，我们就说这个组合是 Delta 中性的。它可以用来做无风险套利。

本系列文章汇总：
 * [美股期权学习笔记（一）](/2020/02/08/option-learning-note/)
 * [美股期权学习笔记（二）](/2020/03/15/option-learning-notes-1/)
 * [美股期权学习笔记（三）](/2020/03/21/option-learning-notes-3/)
 * [美股期权学习笔记（四）](/2020/03/22/option-learning-notes-3/)

